(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{1015:function(e,t,a){e.exports=a.p+"static/media/shards-dashboards-logo.60a85991.svg"},1091:function(e,t){},1419:function(e,t,a){},1422:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(74),c=a.n(l),i=a(230),s=a(121),o=(a(806),a(818),a(819),a(211)),u=a(32),m=a(21),d=a.n(m),f=a(269),p=a(153),b=a(759),E=a(760),h=a.n(E),g=a(412),A={CHANGE:"CHANGE",TOGGLE_SIDEBAR:"TOGGLE_SIDEBAR",ADD_CROSSFILTER_DATA_REQUEST:"ADD_CROSSFILTER_DATA_REQUEST",ADD_CROSSFILTER_DATA_SUCCESS:"ADD_CROSSFILTER_DATA_SUCCESS",ADD_DIMENSION:"@Weekly/ADD_DIMENSION",ADD_DATE_HOUR_DIMENSION:"@InteractionLineChart/ADD_DATE_HOUR_DIMENSION",ADD_HOUR_DIMENSION:"@HourOfDayChart/ADD_HOUR_DIMENSION",ADD_DAY_OF_WEEK_DIMENSION:"@DayOfWeekChart/ADD_DAY_OF_WEEK_DIMENSION",DC_CHART_FILTER_KEPLER_DATA:"@ChartTemplate/DC_CHART_FILTER_KEPLER_DATA",SMALL_STATS_FILTER_KEPLER_DATA:"@SmallStats/SMALL_STATS_FILTER_KEPLER_DATA",KEPLER_MOUNT_ADD_DATA_TO_MAP:"@KeplerAlerts/ADD_DATA_TO_MAP",UPDATE_CHART:"@ChartTemplate/UPDATE_CHART",ALLOWED_ALERT_TYPES:["ACCIDENT","JAM","HAZARD_ON_ROAD_POT_HOLE","HAZARD_WEATHER_FLOOD","HAZARD_ON_ROAD_TRAFFIC_LIGHT_FAULT"]};function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var O=A.TOGGLE_SIDEBAR,_={menuVisible:!1,navItems:[{title:"Miraflores",to:"/miraflores",htmlBefore:'<i class="material-icons">edit</i>',htmlAfter:""},{title:"Montevideo",htmlBefore:'<i class="material-icons">vertical_split</i>',to:"/montevideo"},{title:"Quito",htmlBefore:'<i class="material-icons">note_add</i>',to:"/quito"},{title:"S\xe3o Paulo",htmlBefore:'<i class="material-icons">view_module</i>',to:"/sao-paulo"},{title:"Xalapa",htmlBefore:'<i class="material-icons">table_chart</i>',to:"/xalapa"}]};var D=Object(p.combineReducers)({keplerGl:h.a,sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;switch((arguments.length>1?arguments[1]:void 0).type){case O:return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{menuVisible:!e.menuVisible});default:return e}}}),T=Object(b.enhanceReduxMiddleware)([]),y=[p.applyMiddleware.apply(void 0,Object(f.a)(T))],N=Object(p.createStore)(D,{},p.compose.apply(void 0,y));var x=function(e){var t=e.dispatchAction;return r.a.createElement("nav",{className:"nav"},r.a.createElement("a",{href:"#",onClick:function(){return t(A.TOGGLE_SIDEBAR)},className:"nav-link nav-link-icon toggle-sidebar d-sm-inline d-md-none text-center"},r.a.createElement("i",{className:"material-icons"},"\ue5d2")))},R=function(e){var t=e.stickyTop,a=Object(s.useDispatch)();var n=d()("main-navbar","bg-white",t&&"sticky-top");return r.a.createElement("div",{className:n},r.a.createElement(u.g,{className:"p-0"},r.a.createElement(u.k,{type:"light",className:"align-items-stretch flex-md-nowrap p-0 d-sm-flex d-md-none"},r.a.createElement(x,{dispatchAction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case A.TOGGLE_SIDEBAR:a({type:A.TOGGLE_SIDEBAR,data:t})}}}))))};R.defaultProps={stickyTop:!0};var L=Object(s.connect)()(R);function j(e){var t=e.hideLogoText,n=e.dispatchAction;return r.a.createElement("div",{className:"main-navbar"},r.a.createElement(u.k,{className:"align-items-stretch bg-white flex-md-nowrap border-bottom p-0",type:"light"},r.a.createElement(u.l,{className:"w-100 mr-0",href:"#",style:{lineHeight:"25px"}},r.a.createElement("div",{className:"d-table m-auto"},r.a.createElement("img",{id:"main-logo",className:"d-inline-block align-top mr-1",style:{maxWidth:"25px"},src:a(1015),alt:"Shards Dashboard"}),!t&&r.a.createElement("span",{className:"d-none d-md-inline ml-1"},"Shards Dashboard"))),r.a.createElement("a",{className:"toggle-sidebar d-sm-inline d-md-none",onClick:function(){return n(A.TOGGLE_SIDEBAR)}},r.a.createElement("i",{className:"material-icons"},"\ue5c4"))))}j.defaultProps={hideLogoText:!1};var S=j,C=function(e){var t=e.item;return r.a.createElement(u.i,null,r.a.createElement(u.j,{tag:i.c,to:t.to},t.title&&r.a.createElement("span",null,t.title)))};var H=function(e){var t=e.items;return r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(u.h,{className:"nav--no-borders flex-column"},t.map((function(e){return r.a.createElement(C,{key:e.title,item:e})}))))};function k(e){var t=e.menuVisible,a=e.items,n=e.hideLogoText,l=Object(s.useDispatch)();var c=d()("main-sidebar","px-0","col-12",t&&"open");return r.a.createElement(u.f,{tag:"aside",className:c,md:{size:2}},r.a.createElement(S,{hideLogoText:n,dispatchAction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case A.TOGGLE_SIDEBAR:l({type:A.TOGGLE_SIDEBAR,data:t})}}}),r.a.createElement(H,{items:a}))}k.defaultProps={menuVisible:!1,items:[],hideLogoText:!1};var P=Object(s.connect)((function(e){return{menuVisible:e.sidebar.menuVisible,items:e.sidebar.navItems}}))(k),I=function(e){var t=e.contained,a=e.menuItems,n=e.copyright;return r.a.createElement("footer",{className:"main-footer d-flex p-2 px-3 bg-white border-top"},r.a.createElement(u.g,{fluid:t},r.a.createElement(u.m,null,r.a.createElement(u.h,null,a.map((function(e){return r.a.createElement(u.i,{key:e.title},r.a.createElement(u.j,{tag:i.b,to:e.to},e.title))}))),r.a.createElement("span",{className:"copyright ml-auto my-auto mr-2"},n))))};I.defaultProps={contained:!1,copyright:"Copyright \xa9 2018 DesignRevision",menuItems:[{title:"Home",to:"#"},{title:"Services",to:"#"},{title:"About",to:"#"},{title:"Products",to:"#"},{title:"Blog",to:"#"}]};var w=I,F=function(e){var t=e.children,a=e.noNavbar,n=e.noFooter;return r.a.createElement(u.g,{fluid:!0},r.a.createElement(u.m,null,r.a.createElement(P,null),r.a.createElement(u.f,{className:"main-content p-0",md:{size:10,offset:2},sm:"12",tag:"main"},!a&&r.a.createElement(L,null),t,!n&&r.a.createElement(w,null))))};F.defaultProps={noNavbar:!1,noFooter:!1};var M=F,G=a(277);var U=a(784),W=function(e){var t=e.title,a=e.subtitle,n=e.className,l=Object(U.a)(e,["title","subtitle","className"]),c=d()(n,"text-center","text-md-left","mb-sm-0");return r.a.createElement(u.f,Object.assign({xs:"12",sm:"4",className:c},l),r.a.createElement("span",{className:"text-uppercase page-subtitle"},a),r.a.createElement("h2",{className:"page-title"},t))},K=a(135),z=a(122),B=a(546),Z=a.n(B),Y=a(771),J=a(203),Q=a(204),V=a(418),X=a(413),q=a(419),$=a(530),ee=a(80),te=(a(1017),a(772)),ae=a.n(te).a.create({baseURL:"https://hugo-data.s3.us-east-2.amazonaws.com"}),ne=(Object(ee.timeFormat)("%m/%d/%Y"),Object(ee.timeParse)("%m/%d/%Y"),Object(ee.utcFormat)("%Y-%m-%d %H:%M:%S.%L"),Object(ee.utcParse)("%Y-%m-%d %H:%M:%S.%L"));Object(ee.format)(".2f");function re(e,t){switch(e){case"ACCIDENT":return"accident";case"JAM":return"jam";case"WEATHERHAZARD":switch(t){case"HAZARD_ON_ROAD_POT_HOLE":return"potHole";case"HAZARD_WEATHER_FLOOD":return"flood";case"HAZARD_ON_ROAD_TRAFFIC_LIGHT_FAULT":return"trafficLight";default:return"others"}default:return"others"}}function le(){var e=new Date;return e.setUTCHours(11,0,0),e.setDate(e.getUTCDate()-e.getUTCDay()),e}function ce(e){var t=new Date(e.getTime());return t.setUTCDate(t.getUTCDate()-7),t}function ie(e){return Number(e).toLocaleString(void 0,{style:"percent",minimumFractionDigits:1})}var se=r.a.createContext({data:{}}),oe=function(e){function t(e){var a;return Object(J.a)(this,t),(a=Object(V.a)(this,Object(X.a)(t).call(this,e))).state={loading:!1,hasData:!1},a}return Object(q.a)(t,e),Object(Q.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Y.a)(Z.a.mark((function e(){var t,a,n,r,l,c,i,s=this;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.loading,!t.hasData&&!a){e.next=3;break}return e.abrupt("return");case 3:return this.setState({loading:!0}),n=this.props,r=n.url,l=n.aggFile,e.next=7,ae.get(l);case 7:c=e.sent,i=c.data,this.aggWeeks=i.map((function(e){return e.date=new Date(e.date),e})),Object(ee.csv)(r).then((function(e){e.forEach((function(e){var t=e;t.alertType=re(e.type,e.subtype),t.interactions=+e.interactions,t.longitude=+e.longitude,t.latitude=+e.latitude,t.startTime=ne(e.start_time),t.endTime=ne(e.end_time),t.reliability=+e.reliability,t.confidence=+e.confidence,t.magvar=+e.magvar,t.duration_min=+e.duration_min,t.kepler=Object.values(t),t.hours=ee.utcHour.range(Object(ee.utcHour)(e.startTime),ee.utcHour.offset(Object(ee.utcHour)(e.endTime),1))})),s.data=Object($.default)(e),s.setState({loading:!1,hasData:!0})}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.hasData,t=this.props.children;return e?r.a.createElement(se.Provider,{value:{data:this.data,aggWeeks:this.aggWeeks}},r.a.createElement("div",{ref:this.parent},t)):null}}]),t}(n.Component),ue=a(318),me=a.n(ue),de=a(236),fe=a.n(de);fe.a.defaults.LineWithLine=fe.a.defaults.line,fe.a.controllers.LineWithLine=fe.a.controllers.line.extend({draw:function(e){if(fe.a.controllers.line.prototype.draw.call(this,e),this.chart.tooltip._active&&this.chart.tooltip._active.length){var t=this.chart.tooltip._active[0],a=this.chart.ctx,n=t.tooltipPosition().x,r=this.chart.scales["y-axis-0"].top,l=this.chart.scales["y-axis-0"].bottom;a.save(),a.beginPath(),a.moveTo(n,r),a.lineTo(n,l),a.lineWidth=.5,a.strokeStyle="#ddd",a.stroke(),a.restore()}}});var pe=fe.a;function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var he=function(e){function t(e){var a;return Object(J.a)(this,t),(a=Object(V.a)(this,Object(X.a)(t).call(this,e))).canvasRef=r.a.createRef(),a}return Object(q.a)(t,e),Object(Q.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.chartData,a=e.chartLabels,n=e.chartOptions,r=e.chartConfig,l=Ee({},{maintainAspectRatio:!0,responsive:!0,legend:{display:!1},tooltips:{enabled:!1,custom:!1},elements:{point:{radius:0},line:{tension:.33}},scales:{xAxes:[{gridLines:!1,ticks:{display:!1}}],yAxes:[{gridLines:!1,scaleLabel:!1,ticks:{display:!1,isplay:!1,suggestedMax:Math.max.apply(Math,Object(f.a)(t[0].data))+1}}]}},{},n),c=Ee({},{type:"line",data:Ee({},{labels:a},{},{datasets:t}),options:l},{},r);new pe(this.canvasRef.current,c)}},{key:"render",value:function(){var e=this.props,t=e.variation,a=e.label,n=e.value,l=e.percentage,c=e.increase,i=d()("stats-small",t&&"stats-small--".concat(t)),s=d()("1"===t?"p-0 d-flex":"px-0 pb-0"),o=d()("d-flex","1"===t?"flex-column m-auto":"px-3"),m=d()("stats-small__data","1"===t&&"text-center"),f=d()("stats-small__label","text-uppercase","1"!==t&&"mb-1"),p=d()("stats-small__value","count","1"===t?"my-3":"m-0"),b=d()("stats-small__data","1"!==t&&"text-right align-items-center"),E=d()("stats-small__percentage","stats-small__percentage--".concat(c?"increase":"decrease")),h="1"===t?120:60;return r.a.createElement(u.b,{small:!0,className:i},r.a.createElement(u.c,{className:s},r.a.createElement("div",{className:o},r.a.createElement("div",{className:m},r.a.createElement("span",{className:f},a),r.a.createElement("h6",{className:p},n)),r.a.createElement("div",{className:b},r.a.createElement("span",{className:E},l))),r.a.createElement("canvas",{height:h,ref:this.canvasRef,className:"stats-small-".concat(me()())})))}}]),t}(r.a.Component);he.defaultProps={variation:"",increase:!0,percentage:0,value:0,label:"Label",chartOptions:Object.create(null),chartConfig:Object.create(null),chartData:[],chartLabels:[]};var ge=he,Ae={info:{label:"Alerts",id:"alerts"},data:{fields:[{name:"uuid"},{name:"type"},{name:"subtype"},{name:"interactions"},{name:"street"},{name:"longitude"},{name:"latitude"},{name:"start_time"},{name:"end_time"},{name:"reliability"},{name:"confidence"},{name:"magvar"},{name:"duration_min"}],rows:[]}};var ve=function(e){var t=e.smallStats,a=e.reduxHandler,l=Object(n.useState)([]),c=Object(K.a)(l,2),i=c[0],s=c[1],o=Object(n.useState)(null),m=Object(K.a)(o,2),d=m[0],p=m[1],b=Object(n.useState)([]),E=Object(K.a)(b,2),h=E[0],g=E[1],v=Object(n.useState)({}),O=Object(K.a)(v,2),_=O[0],D=O[1],T=Object(n.useContext)(se),y=T.data,N=T.aggWeeks;return Object(n.useEffect)((function(){var e={},t={};Array.isArray(N)&&N.length&&(N.slice(-6).map((function(t){return"ALERTS"===t.query&&Object.keys(t.agg).filter((function(e){return A.ALLOWED_ALERT_TYPES.includes(e)})).map((function(a){return a in e?e[a].push(t.agg[a]):e[a]=[t.agg[a]],a})),t})),Object.keys(e).map((function(a){var n=function(e){switch(e){case"ACCIDENT":return"accident";case"JAM":return"jam";case"HAZARD_ON_ROAD_POT_HOLE":return"potHole";case"HAZARD_WEATHER_FLOOD":return"flood";case"HAZARD_ON_ROAD_TRAFFIC_LIGHT_FAULT":return"trafficLight";default:return"others"}}(a);t[n]={},t[n].label=function(e){switch(e){case"ACCIDENT":return"Accident";case"JAM":return"Jam";case"HAZARD_ON_ROAD_POT_HOLE":return"Pot Hole";case"HAZARD_WEATHER_FLOOD":return"Flood";case"HAZARD_ON_ROAD_TRAFFIC_LIGHT_FAULT":return"Traffic Light";default:return"others"}}(a),t[n].datasets=e[a].length<6?new Array(6-e[a].length).fill(0).concat(e[a]):e[a];var r,l,c=t[n].datasets.slice(-1),i=Object(K.a)(c,1);return t[n].value=i[0],t[n].percentage=(r=t[n].datasets.slice(-1)[0],ie(0===(l=t[n].datasets.slice(-2)[0])?0:(r-l)/l)),t[n].increase=t[n].datasets.slice(-1)[0]>=t[n].datasets.slice(-2)[0],a}))),D(t)}),[N]),Object(n.useEffect)((function(){p(y.dimension((function(e){return e.alertType})))}),[y]),Object(n.useEffect)((function(){g(d?d.group().all():[])}),[d]),Object(n.useEffect)((function(){return d?(Array.isArray(i)&&i.length?d.filter((function(e){return i.includes(e)})):d.filterAll(),Ae.data.rows=y.allFiltered().map((function(e){return e.kepler})),a(A.SMALL_STATS_FILTER_KEPLER_DATA,{datasets:Ae,options:{centerMap:!0}}),Object(z.redrawAll)(),function(){d.filterAll()}):function(){}}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(u.m,null,h.filter((function(e){return"others"!==e.key})).sort((function(e,t){return t.value-e.value})).map((function(e,a){var n=e.key,l=(e.value,t[a]);return l.label=_[n].label,l.value=_[n].value,l.datasets[0].data=_[n].datasets,l.percentage=_[n].percentage,l.increase=_[n].increase,r.a.createElement(u.f,Object.assign({className:"col-lg mb-4",key:n},l.attrs),r.a.createElement(ge,{id:"small-stats-".concat(a),variation:"1",chartData:l.datasets,chartLabels:l.chartLabels,label:l.label,value:l.value,percentage:l.percentage,increase:l.increase}),r.a.createElement(u.a,{key:n,theme:"info",block:!0,className:"mt-2",active:!!i.includes(n),onClick:function(){i.includes(n)?s(i.filter((function(e){return e!==n}))):s([].concat(Object(f.a)(i),[n]))}},r.a.createElement("span",{style:{"font-size":"larger"}},"Filter")))}))))};ve.defaultProps={smallStats:[{label:"Posts",value:"2,390",percentage:"4.7%",increase:!0,chartLabels:[null,null,null,null,null,null,null],attrs:{md:"6",sm:"6"},datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(0, 184, 216, 0.1)",borderColor:"rgb(0, 184, 216)",data:[1,2,1,3,5,4,7]}]},{label:"Pages",value:"182",percentage:"12.4",increase:!0,chartLabels:[null,null,null,null,null,null,null],attrs:{md:"6",sm:"6"},datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(23,198,113,0.1)",borderColor:"rgb(23,198,113)",data:[1,2,3,3,3,4,4]}]},{label:"Comments",value:"8,147",percentage:"3.8%",increase:!1,decrease:!0,chartLabels:[null,null,null,null,null,null,null],attrs:{md:"4",sm:"6"},datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(255,180,0,0.1)",borderColor:"rgb(255,180,0)",data:[2,3,3,3,4,3,3]}]},{label:"New Customers",value:"29",percentage:"2.71%",increase:!1,decrease:!0,chartLabels:[null,null,null,null,null,null,null],attrs:{md:"4",sm:"6"},datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(255,65,105,0.1)",borderColor:"rgb(255,65,105)",data:[1,7,1,3,1,4,8]}]},{label:"Subscribers",value:"17,281",percentage:"2.4%",increase:!1,decrease:!0,chartLabels:[null,null,null,null,null,null,null],attrs:{md:"4",sm:"6"},datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgb(0,123,255,0.1)",borderColor:"rgb(0,123,255)",data:[3,2,3,2,4,5,4]}]}]};var Oe=ve,_e=a(268),De=a(22),Te=function(e){var t=e.chart,a=e.text,n=e.className,l=void 0===n?"":n,c=e.theme,i=void 0===c?"warning":c,s=e.size,o=void 0===s?"":s;return r.a.createElement(u.a,{theme:i,size:o,className:l,onClick:function(){t.filterAll(),z.redrawAll()}},a)};function ye(){var e=Object(_e.a)(["\n    width: 100%;\n    height: auto;\n    box-sizing: border-box;\n    padding: 5px;\n    & label: {\n      textTransform: 'capitalize',\n      textDecoration: 'underline',\n    }\n"]);return ye=function(){return e},e}var Ne=De.default.div(ye()),xe=function(e){var t=e.chartFunction,a=e.title,l=e.reduxHandler,c=e.className,i=e.titleClassName,s=e.resetClassName,o=e.resetText,m=Object(n.useState)(null),d=Object(K.a)(m,2),f=d[0],p=d[1],b=Object(n.useContext)(se).data,E=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=t({div:E.current,data:b});e.on("filtered",(function(){return Ae.data.rows=b.allFiltered().map((function(e){return e.kepler})),l(A.DC_CHART_FILTER_KEPLER_DATA,{datasets:Ae,options:{centerMap:!0}})})),e.render(),p(e)}),[]),r.a.createElement(u.b,null,r.a.createElement(u.d,{className:"border-bottom"},r.a.createElement(u.m,{className:"align-items-center"},r.a.createElement(u.f,{xs:8},r.a.createElement(u.e,{className:i},a)),r.a.createElement(u.f,null,r.a.createElement(Te,{chart:f,text:o,className:s})))),r.a.createElement(u.c,{className:c},r.a.createElement(Ne,{ref:E})))};xe.defaultProps={className:"p-1",titleClassName:"",resetClassName:"d-flex ml-auto",resetText:"Reset"};var Re=xe,Le=function(e){var t=e.div,a=e.data,n=z.rowChart(t),r=a.dimension((function(e){var t=e.startTime.getDay(),a=e.endTime.getDay(),n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return t===a?["".concat(t,".").concat(n[t])]:["".concat(t,".").concat(n[t]),"".concat(a,".").concat(n[a])]}),!0),l=r.group();return n.dimension(r).group(l).ordering(z.pluck("key")).elasticX(!0).label((function(e){var t=e.key;return t.slice(2,t.length+1)})).xAxis().ticks(5),n},je=function(e){var t=e.reduxHandler;return r.a.createElement(Re,{chartFunction:Le,title:"Weekday",reduxHandler:t})},Se=function(e){var t=e.div,a=e.data,n=z.barChart(t),r=a.dimension((function(e){return e.hours.map((function(e){return e.getHours()}))}),!0),l=r.group();n.dimension(r).group(l).gap(2).x(Object(ee.scaleOrdinal)()).xUnits(z.units.ordinal).height(250).renderHorizontalGridLines(!0).elasticY(!0).yAxisLabel("Total Alerts").xAxisLabel("Hour");var c=l.all().map((function(e,t){return t%2?null:e.key}));return n.xAxis().tickValues(c).tickSizeOuter(0),n.yAxis().ticks(5),n},Ce=function(e){var t=e.reduxHandler;return r.a.createElement(Re,{chartFunction:Se,chartName:"HourOfDay",title:"Active Alerts by Hour",reduxHandler:t})};function He(){var e=Object(_e.a)(["\n    width: 100%;\n    height: auto;\n    box-sizing: border-box;\n    padding: 5px;\n    & label: {\n      textTransform: 'capitalize',\n      textDecoration: 'underline',\n    }\n"]);return He=function(){return e},e}var ke=De.default.div(He()),Pe=function(e){var t=e.chartFunction,a=e.title,l=e.reduxHandler,c=e.className,i=e.titleClassName,s=e.resetClassName,o=e.resetText,m=Object(n.useState)(null),d=Object(K.a)(m,2),f=d[0],p=d[1],b=Object(n.useContext)(se).data,E=Object(n.useRef)(null),h=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=t({div1:E.current,div2:h.current,data:b}),a=Object(K.a)(e,2),n=a[0],r=a[1];n.on("filtered",(function(){return Ae.data.rows=b.allFiltered().map((function(e){return e.kepler})),l(A.DC_CHART_FILTER_KEPLER_DATA,{datasets:Ae,options:{centerMap:!0}})})),n.render(),r.render(),p(n)}),[]),r.a.createElement(u.b,null,r.a.createElement(u.d,{className:"border-bottom"},r.a.createElement(u.m,{className:"align-items-center"},r.a.createElement(u.f,{xs:8},r.a.createElement(u.e,{className:i},a)),r.a.createElement(u.f,null,r.a.createElement(Te,{chart:f,text:o,className:s})))),r.a.createElement(u.c,{className:c},r.a.createElement(ke,{ref:h}),r.a.createElement(ke,{ref:E})))};Pe.defaultProps={className:"p-1",titleClassName:"",resetClassName:"d-flex ml-auto",resetText:"Reset"};var Ie=Pe,we=function(e){var t=e.div1,a=e.div2,n=e.data.dimension((function(e){return e.hours}),!0),r=n.group(),l=n.group().reduceSum((function(e){return e.interactions})),c=z.barChart(t),i=new Date(le().setUTCHours(0)),s=ce(le());c.height(80).margins({top:0,right:50,bottom:20,left:40}).dimension(n).group(r,"Total Alerts").centerBar(!0).gap(1).x(Object(ee.scaleTime)().domain([s,i])).round(ee.utcHour.round).alwaysUseRounding(!0).xUnits(ee.utcHour);var o=z.lineChart(a);return o.dimension(n).mouseZoomable(!1).rangeChart(c).transitionDuration(1e3).x(Object(ee.scaleTime)().domain([s,i])).round(ee.utcHour.round).xUnits(ee.utcHours).elasticY(!0).renderHorizontalGridLines(!0).legend(z.legend().x(800).y(10).itemHeight(13).gap(5)).brushOn(!1).group(l,"Hourly Interactions"),[c,o]},Fe=function(e){var t=e.reduxHandler;return r.a.createElement(Ie,{chartFunction:we,title:"Hourly Alert Interactions",reduxHandler:t})},Me=a(773),Ge=a.n(Me),Ue=a(774),We=a.n(Ue),Ke=function(e){var t=e.id;return r.a.createElement(u.b,{className:"h-100"},r.a.createElement(u.c,{style:{minHeight:"660px"}},r.a.createElement(Ge.a,null,(function(e){var a=e.height,n=e.width;return r.a.createElement(We.a,{mapboxApiAccessToken:"pk.eyJ1IjoiaGJiYXJyZXRvIiwiYSI6ImNqd3RveWxkdTAydzg0M3F5eWhyYXd5NGMifQ.FgAUlMo8dg_qAo_ZsKQnIg",id:t,width:n,height:a})}))))};var ze=function(e){var t=e.id,a=e.reduxHandler,l=Object(n.useContext)(se).data;return Object(n.useEffect)((function(){Ae.data.rows=l.all().map((function(e){return e.kepler})),a(A.KEPLER_MOUNT_ADD_DATA_TO_MAP,{datasets:Ae,options:{centerMap:!0}})}),[]),r.a.createElement(Ke,{id:t})},Be=function(e){var t=e.keplerId,a=e.reduxHandler;return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.m,{className:"mb-3"},r.a.createElement(u.f,{sm:12,md:8,className:"px-2"},r.a.createElement(u.m,{style:{height:"100%"}},r.a.createElement(u.f,{sm:12},r.a.createElement(ze,{id:t,reduxHandler:a})))),r.a.createElement(u.f,{md:4,sm:12,className:"px-2"},r.a.createElement(u.m,{className:"mb-3"},r.a.createElement(u.f,{sm:12},r.a.createElement(je,{reduxHandler:a}))),r.a.createElement(u.m,null,r.a.createElement(u.f,{sm:12},r.a.createElement(Ce,{reduxHandler:a}))))),r.a.createElement(u.m,{className:"mb-3"},r.a.createElement(u.f,{sm:12},r.a.createElement(Fe,{reduxHandler:a}))),r.a.createElement(u.m,{className:"mb-3"}))},Ze=Object(s.connect)()((function(e){var t=e.city,a="".concat(t,"-map"),n=Object(s.useDispatch)(),l=Object(G.forwardTo)(a,n);function c(e,t){switch(e){case A.KEPLER_MOUNT_ADD_DATA_TO_MAP:!function(e){var t=e.mapDispatch,a=e.dispatch,n=e.data;a({type:A.KEPLER_MOUNT_ADD_DATA_TO_MAP}),t(Object(G.addDataToMap)(n))}({mapDispatch:l,dispatch:n,data:t});break;case A.DC_CHART_FILTER_KEPLER_DATA:!function(e){var t=e.mapDispatch,a=e.dispatch,n=e.data;a({type:A.DC_CHART_FILTER_KEPLER_DATA}),t(Object(G.addDataToMap)(n))}({mapDispatch:l,dispatch:n,data:t});break;case A.SMALL_STATS_FILTER_KEPLER_DATA:!function(e){var t=e.mapDispatch,a=e.dispatch,n=e.data;a({type:A.SMALL_STATS_FILTER_KEPLER_DATA}),t(Object(G.addDataToMap)(n))}({mapDispatch:l,dispatch:n,data:t})}}return r.a.createElement(u.g,{fluid:!0,className:"main-content-container px-4"},r.a.createElement(u.m,{noGutters:!0,className:"page-header py-2"},r.a.createElement(W,{title:t,subtitle:"Weekly Report",className:"text-sm-left mb-3"})),r.a.createElement(Oe,{reduxHandler:c}),r.a.createElement(Be,{keplerId:a,reduxHandler:c}))})),Ye="https://hugo-data.s3.us-east-2.amazonaws.com";function Je(e){var t=e.cities,a=le();new Date<a&&(a=ce(a));var n="".concat(Ye,"/").concat(a.toJSON().slice(0,10).replace(/-/g,"/"),"/");return r.a.createElement(o.d,null,r.a.createElement(o.a,{exact:!0,from:"/",to:"/miraflores"}),t.map((function(e){return r.a.createElement(o.b,{key:e.id,path:e.path},r.a.createElement(oe,{url:n+e.fileName,aggFile:e.aggFile},r.a.createElement(M,null,r.a.createElement(Ze,{city:e.name}))))})))}function Qe(){var e=Object(_e.a)(["\n  * {\n    margin: 0;\n    padding: 0;\n    outline: 0;\n    box-sizing: border-box;\n  }\n\n  html, body, #root {\n    min-height: 100%;\n  }\n\n  body {\n    -webkit-font-smoothing: antialiased !important;\n  }\n\n  body, input, button {\n    color: #222;\n    font-size: 14px;\n    font-family: Arial, Helvetica, sans-serif;\n  }\n\n  button {\n    cursor: pointer;\n  }\n"]);return Qe=function(){return e},e}Je.defaultProps={cities:[{id:1,path:"/miraflores",name:"Miraflores",fileName:"Miraflores/ALERTS.csv",aggFile:"MirafloresAgg.json"},{id:2,path:"/montevideo",name:"Montevideo",fileName:"Montevideo/ALERTS.csv",aggFile:"MontevideoAgg.json"},{id:3,path:"/quito",name:"Quito",fileName:"Quito/ALERTS.csv",aggFile:"QuitoAgg.json"},{id:4,path:"/sao-paulo",name:"S\xe3o Paulo",fileName:"SaoPaulo/ALERTS.csv",aggFile:"SaoPauloAgg.json"},{id:5,path:"/xalapa",name:"Xalapa",fileName:"Xalapa/ALERTS.csv",aggFile:"XalapaAgg.json"}]};var Ve=Object(De.createGlobalStyle)(Qe());a(1418),a(1419);var Xe=function(){return r.a.createElement(s.Provider,{store:N},r.a.createElement(i.a,{basename:"/cities-reports"},r.a.createElement(Je,null),r.a.createElement(Ve,null)))};c.a.render(r.a.createElement(Xe,null),document.getElementById("root"))},328:function(e,t){},543:function(e,t){},544:function(e,t){},798:function(e,t,a){e.exports=a(1422)},950:function(e,t){}},[[798,1,2]]]);
//# sourceMappingURL=main.f09b5261.chunk.js.map