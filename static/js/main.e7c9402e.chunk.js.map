{"version":3,"sources":["images/shards-dashboards-logo.svg","store/constants.js","store/modules/sidebar/reducer.js","store/modules/sidebar/sidebar-nav-items.js","store/modules/rootReducer.js","store/index.js","components/layout/MainNavbar/NavbarToggle.js","components/layout/MainNavbar/MainNavbar.js","components/layout/MainSidebar/SidebarMainNavbar.js","components/layout/MainSidebar/SidebarNavItem.js","components/layout/MainSidebar/SidebarNavItems.js","components/layout/MainSidebar/MainSidebar.js","components/layout/MainFooter.js","layouts/Default.js","components/PageTitle/PageTitle.js","services/api.js","utils/index.js","components/DataContext/DataContext.js","utils/chart.js","components/SmallStats/SmallStat.js","data/kepler-data-template.js","components/SmallStats/SmallStats.js","components/DcCharts/ResetButton.js","components/DcCharts/ChartTemplate.js","components/DcCharts/DayOfWeekChart.js","components/DcCharts/HourOfDayChart.js","components/DcCharts/LinkedChartsTemplate.js","components/DcCharts/InteractionLineChart.js","components/KeplerMap/KeplerMap.js","components/DcCharts/KeplerAlerts.js","components/DcCharts/DcCharts.js","pages/WeeklyReport/weekly.js","store/actions.js","routes.js","styles/global.js","App.js","index.js"],"names":["module","exports","CHANGE","TOGGLE_SIDEBAR","ADD_CROSSFILTER_DATA_REQUEST","ADD_CROSSFILTER_DATA_SUCCESS","ADD_DIMENSION","ADD_DATE_HOUR_DIMENSION","ADD_HOUR_DIMENSION","ADD_DAY_OF_WEEK_DIMENSION","DC_CHART_FILTER_KEPLER_DATA","SMALL_STATS_FILTER_KEPLER_DATA","KEPLER_MOUNT_ADD_DATA_TO_MAP","UPDATE_CHART","ALLOWED_ALERT_TYPES","constants","initalState","menuVisible","navItems","title","to","htmlBefore","htmlAfter","combineReducers","keplerGl","keplerGlReducer","sidebar","state","type","middlewares","enhanceReduxMiddleware","enhancers","applyMiddleware","store","createStore","rootReducer","compose","NavbarToggle","dispatchAction","className","href","onClick","Constants","MainNavbar","stickyTop","dispatch","useDispatch","classes","classNames","data","defaultProps","connect","SidebarMainNavbar","hideLogoText","style","lineHeight","id","maxWidth","src","require","alt","SidebarNavItem","item","tag","RouteNavLink","SidebarNavItems","items","map","key","MainSidebar","md","size","MainFooter","contained","menuItems","copyright","fluid","Link","DefaultLayout","children","noNavbar","noFooter","offset","sm","PageTitle","subtitle","attrs","xs","api","axios","create","baseURL","dateUTCFormatParser","timeFormat","timeParse","utcFormat","utcParse","format","parseAlertTypeSubtype","subtype","getLastSunday","d","Date","setDate","getUTCDate","getUTCDay","setUTCHours","setMinutes","setSeconds","getSundayBefore","sunday","getTime","setUTCDate","parseNumberToPercentage","num","Number","toLocaleString","undefined","minimumFractionDigits","DataContext","React","createContext","DataProvider","props","loading","hasData","this","setState","url","aggFile","get","aggWeeks","week","date","csv","then","forEach","entry","alertType","interactions","longitude","latitude","startTime","start_time","endTime","end_time","reliability","confidence","magvar","duration_min","kepler","Object","values","hours","utcHour","range","crossfilter","Provider","value","ref","parent","Component","Chart","defaults","LineWithLine","line","controllers","extend","draw","ease","prototype","call","chart","tooltip","_active","length","activePoint","ctx","x","tooltipPosition","topY","scales","top","bottomY","bottom","save","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","restore","SmallStat","canvasRef","createRef","chartData","chartLabels","propsChartOptions","chartOptions","propsChartConfig","chartConfig","maintainAspectRatio","responsive","legend","display","tooltips","enabled","custom","elements","point","radius","tension","xAxes","gridLines","ticks","yAxes","scaleLabel","isplay","suggestedMax","Math","max","labels","datasets","options","current","variation","label","percentage","increase","cardClasses","cardBodyClasses","innerWrapperClasses","dataFieldClasses","labelClasses","valueClasses","innerDataFieldClasses","percentageClasses","canvasHeight","small","height","shortid","info","fields","name","rows","SmallStats","smallStats","reduxHandler","useState","filters","setFilters","dimension","setDimension","alertTypes","setAlertTypes","statsData","setStatsData","useContext","useEffect","dsets","sData","Array","isArray","slice","query","keys","agg","filter","REDUX_ENUMS","includes","push","statsDataKey","getStatLabel","fill","concat","currValue","oldValue","group","all","filterAll","dataTemplate","allFiltered","centerMap","redrawAll","a","sort","b","idx","alert","stats","theme","block","active","borderWidth","backgroundColor","borderColor","decrease","ResetButton","text","dc","Div","styled","div","ChartTemplate","chartFunction","titleClassName","resetClassName","resetText","updateChart","useRef","newChart","on","render","dayOfWeekFunc","dayOfWeekChart","startDay","getDay","endDay","ordering","elasticX","xAxis","DayOfWeekChart","hourOfDayFunc","hourOfDayChart","getHours","gap","scaleOrdinal","xUnits","ordinal","renderHorizontalGridLines","elasticY","yAxisLabel","xAxisLabel","g","i","tickValues","tickSizeOuter","yAxis","HourOfDayChart","chartName","div1","div2","secondChart","lineAndBarChartsFunc","alertsGroup","interactionsGroup","reduceSum","volumeChart","lastSunday","sundayBefore","margins","right","left","centerBar","scaleTime","domain","round","alwaysUseRounding","lineChart","mouseZoomable","rangeChart","transitionDuration","utcHours","y","itemHeight","brushOn","InteractionLineChart","LinkedChartsTemplate","KeplerMap","minHeight","width","mapboxApiAccessToken","process","KeplerAlerts","DcCharts","keplerId","city","mapDispatch","forwardTo","addDataToMap","keplerMountAddData","dcChartFilterKeplerData","smallStatsFilterKeplerData","noGutters","baseUrl","Routes","cities","prefix","toJSON","replace","exact","from","path","fileName","Default","createGlobalStyle","App","basename","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.e7c9402e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/shards-dashboards-logo.60a85991.svg\";","export default {\n  // sidebar enums\n  CHANGE: 'CHANGE',\n  TOGGLE_SIDEBAR: 'TOGGLE_SIDEBAR',\n  // weeklyData enums\n  ADD_CROSSFILTER_DATA_REQUEST: 'ADD_CROSSFILTER_DATA_REQUEST',\n  ADD_CROSSFILTER_DATA_SUCCESS: 'ADD_CROSSFILTER_DATA_SUCCESS',\n  ADD_DIMENSION: '@Weekly/ADD_DIMENSION',\n  ADD_DATE_HOUR_DIMENSION: '@InteractionLineChart/ADD_DATE_HOUR_DIMENSION',\n  ADD_HOUR_DIMENSION: '@HourOfDayChart/ADD_HOUR_DIMENSION',\n  ADD_DAY_OF_WEEK_DIMENSION: '@DayOfWeekChart/ADD_DAY_OF_WEEK_DIMENSION',\n  DC_CHART_FILTER_KEPLER_DATA: '@ChartTemplate/DC_CHART_FILTER_KEPLER_DATA',\n  SMALL_STATS_FILTER_KEPLER_DATA: '@SmallStats/SMALL_STATS_FILTER_KEPLER_DATA',\n  KEPLER_MOUNT_ADD_DATA_TO_MAP: '@KeplerAlerts/ADD_DATA_TO_MAP',\n  UPDATE_CHART: '@ChartTemplate/UPDATE_CHART',\n  // App enums\n  ALLOWED_ALERT_TYPES: [\n    'ACCIDENT',\n    'JAM',\n    'HAZARD_ON_ROAD_POT_HOLE',\n    'HAZARD_WEATHER_FLOOD',\n    'HAZARD_ON_ROAD_TRAFFIC_LIGHT_FAULT',\n  ]\n};\n","import constants from '../../constants';\nimport getSidebarNavItems from './sidebar-nav-items';\n\nconst { TOGGLE_SIDEBAR } = constants;\nconst initalState = { menuVisible: false, navItems: getSidebarNavItems() };\n\nexport default function sidebar(state = initalState, action) {\n  switch (action.type) {\n    case TOGGLE_SIDEBAR:\n      return { ...state, menuVisible: !state.menuVisible };\n    default:\n      return state;\n  }\n}\n","export default function() {\n  return [\n    {\n      title: 'Miraflores',\n      to: '/miraflores',\n      htmlBefore: '<i class=\"material-icons\">edit</i>',\n      htmlAfter: '',\n    },\n    {\n      title: 'Montevideo',\n      htmlBefore: '<i class=\"material-icons\">vertical_split</i>',\n      to: '/montevideo',\n    },\n    {\n      title: 'Quito',\n      htmlBefore: '<i class=\"material-icons\">note_add</i>',\n      to: '/quito',\n    },\n    {\n      title: 'São Paulo',\n      htmlBefore: '<i class=\"material-icons\">view_module</i>',\n      to: '/sao-paulo',\n    },\n    {\n      title: 'Xalapa',\n      htmlBefore: '<i class=\"material-icons\">table_chart</i>',\n      to: '/xalapa',\n    },\n  ];\n}\n","import { combineReducers } from 'redux';\nimport keplerGlReducer from 'kepler.gl/reducers';\n\nimport sidebar from './sidebar/reducer';\n\nexport default combineReducers({\n  keplerGl: keplerGlReducer,\n  sidebar,\n});\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport { enhanceReduxMiddleware } from 'kepler.gl/middleware';\n\nimport rootReducer from './modules/rootReducer';\n\nconst middlewares = enhanceReduxMiddleware([]);\n/* const enhancers =\n  process.env.NODE_ENV === 'development'\n    ? [console.tron.createEnhancer(), applyMiddleware(...middlewares)]\n    : [applyMiddleware(...middlewares)];\n */\nconst enhancers = [applyMiddleware(...middlewares)];\n\nconst initialState = {};\n\nconst store = createStore(rootReducer, initialState, compose(...enhancers));\n\nexport { default as Constants } from './constants';\nexport default store;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Constants } from '../../../store';\n\nfunction NavbarToggle({ dispatchAction }) {\n  const handleClick = () => dispatchAction(Constants.TOGGLE_SIDEBAR);\n\n  return (\n    <nav className=\"nav\">\n      {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\n      <a\n        href=\"#\"\n        onClick={handleClick}\n        className=\"nav-link nav-link-icon toggle-sidebar d-sm-inline d-md-none text-center\"\n      >\n        <i className=\"material-icons\">&#xE5D2;</i>\n      </a>\n    </nav>\n  );\n}\n\nNavbarToggle.propTypes = {\n  dispatchAction: PropTypes.func.isRequired,\n};\n\nexport default NavbarToggle;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect, useDispatch } from 'react-redux';\nimport classNames from 'classnames';\nimport { Container, Navbar } from 'shards-react';\n\nimport { Constants } from '../../../store';\n\n// import NavbarSearch from './NavbarSearch';\n// import NavbarNav from './NavbarNav/NavbarNav';\nimport NavbarToggle from './NavbarToggle';\n\nconst MainNavbar = ({ stickyTop }) => {\n  const dispatch = useDispatch();\n\n  function reduxHandler(type, data = null) {\n    switch (type) {\n      case Constants.TOGGLE_SIDEBAR:\n        dispatch({\n          type: Constants.TOGGLE_SIDEBAR,\n          data,\n        });\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  const classes = classNames(\n    'main-navbar',\n    'bg-white',\n    stickyTop && 'sticky-top'\n  );\n\n  return (\n    <div className={classes}>\n      <Container className=\"p-0\">\n        <Navbar\n          type=\"light\"\n          className=\"align-items-stretch flex-md-nowrap p-0 d-sm-flex d-md-none\"\n        >\n          {/* <NavbarSearch /> */}\n          {/* <NavbarNav /> */}\n          <NavbarToggle dispatchAction={reduxHandler} />\n        </Navbar>\n      </Container>\n    </div>\n  );\n};\n\nMainNavbar.propTypes = {\n  /**\n   * The layout type where the MainNavbar is used.\n   */\n  // layout: PropTypes.string,\n  /**\n   * Whether the main navbar is sticky to the top, or not.\n   */\n  stickyTop: PropTypes.bool,\n};\n\nMainNavbar.defaultProps = {\n  stickyTop: true,\n};\n\nexport default connect()(MainNavbar);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Navbar, NavbarBrand } from 'shards-react';\n\nimport { Constants } from '../../../store';\n\nfunction SidebarMainNavbar({ hideLogoText, dispatchAction }) {\n  const handleToggleSidebar = () => dispatchAction(Constants.TOGGLE_SIDEBAR);\n\n  return (\n    <div className=\"main-navbar\">\n      <Navbar\n        className=\"align-items-stretch bg-white flex-md-nowrap border-bottom p-0\"\n        type=\"light\"\n      >\n        <NavbarBrand\n          className=\"w-100 mr-0\"\n          href=\"#\"\n          style={{ lineHeight: '25px' }}\n        >\n          <div className=\"d-table m-auto\">\n            <img\n              id=\"main-logo\"\n              className=\"d-inline-block align-top mr-1\"\n              style={{ maxWidth: '25px' }}\n              src={require('../../../images/shards-dashboards-logo.svg')}\n              alt=\"Shards Dashboard\"\n            />\n            {!hideLogoText && (\n              <span className=\"d-none d-md-inline ml-1\">Shards Dashboard</span>\n            )}\n          </div>\n        </NavbarBrand>\n        {/* eslint-disable-next-line */}\n        <a\n          className=\"toggle-sidebar d-sm-inline d-md-none\"\n          onClick={handleToggleSidebar}\n        >\n          <i className=\"material-icons\">&#xE5C4;</i>\n        </a>\n      </Navbar>\n    </div>\n  );\n}\n\nSidebarMainNavbar.propTypes = {\n  dispatchAction: PropTypes.func.isRequired,\n  /**\n   * Whether to hide the logo text, or not.\n   */\n  hideLogoText: PropTypes.bool,\n};\n\nSidebarMainNavbar.defaultProps = {\n  hideLogoText: false,\n};\n\nexport default SidebarMainNavbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { NavLink as RouteNavLink } from 'react-router-dom';\nimport { NavItem, NavLink } from 'shards-react';\n\nconst SidebarNavItem = ({ item }) => (\n  <NavItem>\n    <NavLink tag={RouteNavLink} to={item.to}>\n      {item.title && <span>{item.title}</span>}\n    </NavLink>\n  </NavItem>\n);\n\nSidebarNavItem.propTypes = {\n  /**\n   * The item object.\n   */\n  item: PropTypes.objectOf(PropTypes.string).isRequired,\n};\n\nexport default SidebarNavItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Nav } from 'shards-react';\n\nimport SidebarNavItem from './SidebarNavItem';\n\nfunction SidebarNavItems({ items }) {\n  return (\n    <div className=\"nav-wrapper\">\n      <Nav className=\"nav--no-borders flex-column\">\n        {items.map(item => (\n          <SidebarNavItem key={item.title} item={item} />\n        ))}\n      </Nav>\n    </div>\n  );\n}\n\nSidebarNavItems.propTypes = {\n  items: PropTypes.arrayOf(PropTypes.element).isRequired,\n};\n\nexport default SidebarNavItems;\n","import React from 'react';\nimport { connect, useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Col } from 'shards-react';\n\nimport { Constants } from '../../../store';\n\nimport SidebarMainNavbar from './SidebarMainNavbar';\n// import SidebarSearch from './SidebarSearch';\nimport SidebarNavItems from './SidebarNavItems';\n\nfunction MainSidebar({ menuVisible, items, hideLogoText }) {\n  const dispatch = useDispatch();\n\n  function reduxHandler(type, data = null) {\n    switch (type) {\n      case Constants.TOGGLE_SIDEBAR:\n        dispatch({\n          type: Constants.TOGGLE_SIDEBAR,\n          data,\n        });\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  const classes = classNames(\n    'main-sidebar',\n    'px-0',\n    'col-12',\n    menuVisible && 'open'\n  );\n\n  return (\n    <Col tag=\"aside\" className={classes} md={{ size: 2 }}>\n      <SidebarMainNavbar\n        hideLogoText={hideLogoText}\n        dispatchAction={reduxHandler}\n      />\n      {/* <SidebarSearch /> */}\n      <SidebarNavItems items={items} />\n    </Col>\n  );\n}\n\nMainSidebar.propTypes = {\n  menuVisible: PropTypes.bool,\n  items: PropTypes.arrayOf(PropTypes.element),\n  /**\n   * Whether to hide the logo text, or not.\n   */\n  hideLogoText: PropTypes.bool,\n};\n\nMainSidebar.defaultProps = {\n  menuVisible: false,\n  items: [],\n  hideLogoText: false,\n};\n\nconst mapStateToProps = state => ({\n  menuVisible: state.sidebar.menuVisible,\n  items: state.sidebar.navItems,\n});\n\nexport default connect(mapStateToProps)(MainSidebar);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Container, Row, Nav, NavItem, NavLink } from 'shards-react';\nimport { Link } from 'react-router-dom';\n\nconst MainFooter = ({ contained, menuItems, copyright }) => (\n  <footer className=\"main-footer d-flex p-2 px-3 bg-white border-top\">\n    <Container fluid={contained}>\n      <Row>\n        <Nav>\n          {menuItems.map(item => (\n            <NavItem key={item.title}>\n              <NavLink tag={Link} to={item.to}>\n                {item.title}\n              </NavLink>\n            </NavItem>\n          ))}\n        </Nav>\n        <span className=\"copyright ml-auto my-auto mr-2\">{copyright}</span>\n      </Row>\n    </Container>\n  </footer>\n);\n\nMainFooter.propTypes = {\n  /**\n   * Whether the content is contained, or not.\n   */\n  contained: PropTypes.bool,\n  /**\n   * The menu items array.\n   */\n  menuItems: PropTypes.arrayOf(PropTypes.objectOf(PropTypes.string)),\n  /**\n   * The copyright info.\n   */\n  copyright: PropTypes.string,\n};\n\nMainFooter.defaultProps = {\n  contained: false,\n  copyright: 'Copyright © 2018 DesignRevision',\n  menuItems: [\n    {\n      title: 'Home',\n      to: '#',\n    },\n    {\n      title: 'Services',\n      to: '#',\n    },\n    {\n      title: 'About',\n      to: '#',\n    },\n    {\n      title: 'Products',\n      to: '#',\n    },\n    {\n      title: 'Blog',\n      to: '#',\n    },\n  ],\n};\n\nexport default MainFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Container, Row, Col } from 'shards-react';\n\nimport MainNavbar from '../components/layout/MainNavbar/MainNavbar';\nimport MainSidebar from '../components/layout/MainSidebar/MainSidebar';\nimport MainFooter from '../components/layout/MainFooter';\n\nconst DefaultLayout = ({ children, noNavbar, noFooter }) => (\n  <Container fluid>\n    <Row>\n      <MainSidebar />\n      <Col\n        className=\"main-content p-0\"\n        md={{ size: 10, offset: 2 }}\n        sm=\"12\"\n        tag=\"main\"\n      >\n        {!noNavbar && <MainNavbar />}\n        {children}\n        {!noFooter && <MainFooter />}\n      </Col>\n    </Row>\n  </Container>\n);\n\nDefaultLayout.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]).isRequired,\n  /**\n   * Whether to display the navbar, or not.\n   */\n  noNavbar: PropTypes.bool,\n  /**\n   * Whether to display the footer, or not.\n   */\n  noFooter: PropTypes.bool,\n};\n\nDefaultLayout.defaultProps = {\n  noNavbar: false,\n  noFooter: false,\n};\n\nexport default DefaultLayout;\n","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { Col } from 'shards-react';\n\nconst PageTitle = ({ title, subtitle, className, ...attrs }) => {\n  const classes = classNames(\n    className,\n    'text-center',\n    'text-md-left',\n    'mb-sm-0'\n  );\n\n  return (\n    <Col xs=\"12\" sm=\"4\" className={classes} {...attrs}>\n      <span className=\"text-uppercase page-subtitle\">{subtitle}</span>\n      <h2 className=\"page-title\">{title}</h2>\n    </Col>\n  );\n};\n\nPageTitle.propTypes = {\n  /**\n   * The page title.\n   */\n  title: PropTypes.string,\n  /**\n   * The page subtitle.\n   */\n  subtitle: PropTypes.string,\n};\n\nexport default PageTitle;\n","import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'https://hugo-data.s3.us-east-2.amazonaws.com'\n});\n\nexport default api;\n","import { timeFormat, timeParse, utcFormat, utcParse, format } from 'd3';\n\nexport const dateFormatSpecifier = '%m/%d/%Y';\nexport const dateFormat = timeFormat(dateFormatSpecifier);\nexport const dateFormatParser = timeParse(dateFormatSpecifier);\n\nexport const dateUTCFormatSpecifier = '%Y-%m-%d %H:%M:%S.%L';\nexport const dateUTCFormat = utcFormat(dateUTCFormatSpecifier);\nexport const dateUTCFormatParser = utcParse(dateUTCFormatSpecifier);\n\nexport const numberFormat = format('.2f');\n\nexport function parseAlertTypeSubtype(type, subtype) {\n  switch (type) {\n    case 'ACCIDENT':\n      return 'accident';\n    case 'JAM':\n      return 'jam';\n    case 'WEATHERHAZARD':\n      switch (subtype) {\n        case 'HAZARD_ON_ROAD_POT_HOLE':\n          return 'potHole';\n        case 'HAZARD_WEATHER_FLOOD':\n          return 'flood';\n        case 'HAZARD_ON_ROAD_TRAFFIC_LIGHT_FAULT':\n          return 'trafficLight';\n        default:\n          return 'others';\n      }\n    default:\n      return 'others';\n  }\n}\n\nexport function last(array) {\n  return array[array.length - 1];\n}\n\nexport function getLastSunday() {\n  const d = new Date();\n  d.setDate(d.getUTCDate() - d.getUTCDay());\n  d.setUTCHours(11);\n  d.setMinutes(0);\n  d.setSeconds(0);\n  return d;\n}\n\nexport function getSundayBefore(sunday) {\n  const d = new Date(sunday.getTime());\n  d.setUTCDate(d.getUTCDate() - 7);\n  return d;\n}\n\nfunction parseNumberToPercentage(num) {\n  return Number(num).toLocaleString(undefined, {\n    style: 'percent',\n    minimumFractionDigits: 1,\n  });\n}\n\nexport function getPercentage(currValue, oldValue) {\n  if (oldValue === 0) {\n    return parseNumberToPercentage(0);\n  }\n  return parseNumberToPercentage((currValue - oldValue) / oldValue);\n}\n\nexport function getStatLabel(type) {\n  switch (type) {\n    case 'ACCIDENT':\n      return 'Accident';\n    case 'JAM':\n      return 'Jam';\n    case 'HAZARD_ON_ROAD_POT_HOLE':\n      return 'Pot Hole';\n    case 'HAZARD_WEATHER_FLOOD':\n      return 'Flood';\n    case 'HAZARD_ON_ROAD_TRAFFIC_LIGHT_FAULT':\n      return 'Traffic Light';\n    default:\n      return 'others';\n  }\n}\n","import React, { Component } from 'react';\nimport crossfilter from 'crossfilter2';\nimport { csv, utcHour } from 'd3';\nimport 'dc/dc.css';\n\nimport api from '../../services/api';\nimport { dateUTCFormatParser, parseAlertTypeSubtype } from '../../utils';\n\nexport const DataContext = React.createContext({ data: {} });\n\nexport class DataProvider extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: false, hasData: false };\n  }\n\n  async componentDidMount() {\n    const { loading, hasData } = this.state;\n    if (hasData || loading) {\n      return;\n    }\n    this.setState({ loading: true });\n    const { url, aggFile } = this.props;\n    const { data: aggWeeks } = await api.get(aggFile);\n    this.aggWeeks = aggWeeks.map(week => {\n      week.date = new Date(week.date);\n      return week;\n    });\n    // Generalizar isso aqui\n    csv(url).then(data => {\n      // csv('./ndx.csv').then(data => {\n      data.forEach(d => {\n        const entry = d;\n        entry.alertType = parseAlertTypeSubtype(d.type, d.subtype);\n        entry.interactions = +d.interactions;\n        entry.longitude = +d.longitude;\n        entry.latitude = +d.latitude;\n        entry.startTime = dateUTCFormatParser(d.start_time);\n        entry.endTime = dateUTCFormatParser(d.end_time);\n        entry.reliability = +d.reliability;\n        entry.confidence = +d.confidence;\n        entry.magvar = +d.magvar;\n        entry.duration_min = +d.duration_min;\n        entry.kepler = Object.values(entry);\n        entry.hours = utcHour.range(\n          utcHour(d.startTime),\n          utcHour.offset(utcHour(d.endTime), 1)\n        );\n      });\n\n      this.data = crossfilter(data); // TODO possibly need to update this\n      this.setState({ loading: false, hasData: true });\n    });\n  }\n\n  render() {\n    const { hasData } = this.state;\n    const { children } = this.props;\n\n    if (!hasData) {\n      return null;\n    }\n    return (\n      <DataContext.Provider\n        value={{ data: this.data, aggWeeks: this.aggWeeks }}\n      >\n        <div ref={this.parent}>{children}</div>\n      </DataContext.Provider>\n    );\n  }\n}\n","import Chart from 'chart.js';\n\nChart.defaults.LineWithLine = Chart.defaults.line;\nChart.controllers.LineWithLine = Chart.controllers.line.extend({\n  draw(ease) {\n    Chart.controllers.line.prototype.draw.call(this, ease);\n\n    if (this.chart.tooltip._active && this.chart.tooltip._active.length) {\n      const activePoint = this.chart.tooltip._active[0];\n      const { ctx } = this.chart;\n      const { x } = activePoint.tooltipPosition();\n      const topY = this.chart.scales['y-axis-0'].top;\n      const bottomY = this.chart.scales['y-axis-0'].bottom;\n\n      // Draw the line\n      ctx.save();\n      ctx.beginPath();\n      ctx.moveTo(x, topY);\n      ctx.lineTo(x, bottomY);\n      ctx.lineWidth = 0.5;\n      ctx.strokeStyle = '#ddd';\n      ctx.stroke();\n      ctx.restore();\n    }\n  },\n});\n\nexport default Chart;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport shortid from 'shortid';\nimport { Card, CardBody } from 'shards-react';\n\nimport Chart from '../../utils/chart';\n\nclass SmallStat extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.canvasRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const {\n      chartData,\n      chartLabels,\n      chartOptions: propsChartOptions,\n      chartConfig: propsChartConfig,\n    } = this.props;\n\n    const chartOptions = {\n      ...{\n        maintainAspectRatio: true,\n        responsive: true,\n        legend: {\n          display: false,\n        },\n        tooltips: {\n          enabled: false,\n          custom: false,\n        },\n        elements: {\n          point: {\n            radius: 0,\n          },\n          line: {\n            tension: 0.33,\n          },\n        },\n        scales: {\n          xAxes: [\n            {\n              gridLines: false,\n              ticks: {\n                display: false,\n              },\n            },\n          ],\n          yAxes: [\n            {\n              gridLines: false,\n              scaleLabel: false,\n              ticks: {\n                display: false,\n                isplay: false,\n                // Avoid getting the graph line cut of at the top of the canvas.\n                // Chart.js bug link: https://github.com/chartjs/Chart.js/issues/4790\n                suggestedMax: Math.max(...chartData[0].data) + 1,\n              },\n            },\n          ],\n        },\n      },\n      ...propsChartOptions,\n    };\n\n    const chartConfig = {\n      ...{\n        type: 'line',\n        data: {\n          ...{\n            labels: chartLabels,\n          },\n          ...{\n            datasets: chartData,\n          },\n        },\n        options: chartOptions,\n      },\n      ...propsChartConfig,\n    };\n\n    new Chart(this.canvasRef.current, chartConfig);\n  }\n\n  render() {\n    const { variation, label, value, percentage, increase } = this.props;\n\n    const cardClasses = classNames(\n      'stats-small',\n      variation && `stats-small--${variation}`\n    );\n\n    const cardBodyClasses = classNames(\n      variation === '1' ? 'p-0 d-flex' : 'px-0 pb-0'\n    );\n\n    const innerWrapperClasses = classNames(\n      'd-flex',\n      variation === '1' ? 'flex-column m-auto' : 'px-3'\n    );\n\n    const dataFieldClasses = classNames(\n      'stats-small__data',\n      variation === '1' && 'text-center'\n    );\n\n    const labelClasses = classNames(\n      'stats-small__label',\n      'text-uppercase',\n      variation !== '1' && 'mb-1'\n    );\n\n    const valueClasses = classNames(\n      'stats-small__value',\n      'count',\n      variation === '1' ? 'my-3' : 'm-0'\n    );\n\n    const innerDataFieldClasses = classNames(\n      'stats-small__data',\n      variation !== '1' && 'text-right align-items-center'\n    );\n\n    const percentageClasses = classNames(\n      'stats-small__percentage',\n      `stats-small__percentage--${increase ? 'increase' : 'decrease'}`\n    );\n\n    const canvasHeight = variation === '1' ? 120 : 60;\n\n    return (\n      <Card small className={cardClasses}>\n        <CardBody className={cardBodyClasses}>\n          <div className={innerWrapperClasses}>\n            <div className={dataFieldClasses}>\n              <span className={labelClasses}>{label}</span>\n              <h6 className={valueClasses}>{value}</h6>\n            </div>\n            <div className={innerDataFieldClasses}>\n              <span className={percentageClasses}>{percentage}</span>\n            </div>\n          </div>\n          <canvas\n            height={canvasHeight}\n            ref={this.canvasRef}\n            className={`stats-small-${shortid()}`}\n          />\n        </CardBody>\n      </Card>\n    );\n  }\n}\n\nSmallStat.propTypes = {\n  /**\n   * The Small Stats variation.\n   */\n  variation: PropTypes.string,\n  /**\n   * The label.\n   */\n  label: PropTypes.string,\n  /**\n   * The value.\n   */\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  /**\n   * The percentage number or string.\n   */\n  percentage: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  /**\n   * Whether is a value increase, or not.\n   */\n  increase: PropTypes.bool,\n  /**\n   * The Chart.js configuration object.\n   */\n  chartConfig: PropTypes.object,\n  /**\n   * The Chart.js options object.\n   */\n  chartOptions: PropTypes.object,\n  /**\n   * The chart data.\n   */\n  chartData: PropTypes.array.isRequired,\n  /**\n   * The chart labels.\n   */\n  chartLabels: PropTypes.array,\n};\n\nSmallStat.defaultProps = {\n  variation: '',\n  increase: true,\n  percentage: 0,\n  value: 0,\n  label: 'Label',\n  chartOptions: Object.create(null),\n  chartConfig: Object.create(null),\n  chartData: [],\n  chartLabels: [],\n};\n\nexport default SmallStat;\n","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nexport default {\n  info: {\n    label: 'Alerts',\n    id: 'alerts',\n  },\n  data: {\n    fields: [\n      {\n        name: 'uuid',\n      },\n      {\n        name: 'type',\n      },\n      {\n        name: 'subtype',\n      },\n      {\n        name: 'interactions',\n      },\n      {\n        name: 'street',\n      },\n      {\n        name: 'longitude',\n      },\n      {\n        name: 'latitude',\n      },\n      {\n        name: 'start_time',\n      },\n      {\n        name: 'end_time',\n      },\n      {\n        name: 'reliability',\n      },\n      {\n        name: 'confidence',\n      },\n      {\n        name: 'magvar',\n      },\n      {\n        name: 'duration_min',\n      },\n    ],\n    rows: [],\n  },\n};\n","import React, { useContext, useState, useEffect } from 'react';\nimport { redrawAll } from 'dc';\nimport PropTypes from 'prop-types';\nimport { Row, Col, Button } from 'shards-react';\n\nimport { DataContext } from '../DataContext';\nimport SmallStat from './SmallStat';\nimport dataTemplate from '../../data/kepler-data-template';\nimport REDUX_ENUMS from '../../store/constants';\nimport { getPercentage, getStatLabel } from '../../utils';\n\nfunction statsDataKey(type) {\n  switch (type) {\n    case 'ACCIDENT':\n      return 'accident';\n    case 'JAM':\n      return 'jam';\n    case 'HAZARD_ON_ROAD_POT_HOLE':\n      return 'potHole';\n    case 'HAZARD_WEATHER_FLOOD':\n      return 'flood';\n    case 'HAZARD_ON_ROAD_TRAFFIC_LIGHT_FAULT':\n      return 'trafficLight';\n    default:\n      return 'others';\n  }\n}\n\nconst SmallStats = ({ smallStats, reduxHandler }) => {\n  const [filters, setFilters] = useState([]);\n  const [dimension, setDimension] = useState(null);\n  const [alertTypes, setAlertTypes] = useState([]);\n  const [statsData, setStatsData] = useState({});\n  const { data, aggWeeks } = useContext(DataContext);\n\n  useEffect(() => {\n    const dsets = {};\n    const sData = {};\n    if (Array.isArray(aggWeeks) && aggWeeks.length) {\n      aggWeeks.slice(-6).map(week => {\n        if (week.query === 'ALERTS') {\n          Object.keys(week.agg)\n            .filter(type => REDUX_ENUMS.ALLOWED_ALERT_TYPES.includes(type))\n            .map(type => {\n              if (type in dsets) {\n                dsets[type].push(week.agg[type]);\n              } else {\n                dsets[type] = [week.agg[type]];\n              }\n              return type;\n            });\n        }\n        return week;\n      });\n      Object.keys(dsets).map(type => {\n        const key = statsDataKey(type);\n        sData[key] = {};\n        sData[key].label = getStatLabel(type);\n        sData[key].datasets =\n          dsets[type].length < 6\n            ? new Array(6 - dsets[type].length).fill(0).concat(dsets[type])\n            : dsets[type];\n        [sData[key].value] = sData[key].datasets.slice(-1);\n        sData[key].percentage = getPercentage(\n          sData[key].datasets.slice(-1)[0],\n          sData[key].datasets.slice(-2)[0]\n        );\n        sData[key].increase =\n          sData[key].datasets.slice(-1)[0] >= sData[key].datasets.slice(-2)[0];\n        return type;\n      });\n    }\n    setStatsData(sData);\n  }, [aggWeeks]);\n\n  // We want to define dimesion only once, then keep it\n  useEffect(() => {\n    setDimension(data.dimension(d => d.alertType));\n  }, [data]);\n\n  // Get the alertTypes when dimesion is defined\n  useEffect(() => {\n    setAlertTypes(dimension ? dimension.group().all() : []);\n  }, [dimension]);\n\n  useEffect(() => {\n    if (dimension) {\n      if (Array.isArray(filters) && filters.length) {\n        dimension.filter(alertType => filters.includes(alertType));\n      } else {\n        dimension.filterAll();\n      }\n      dataTemplate.data.rows = data.allFiltered().map(d => d.kepler);\n      reduxHandler(REDUX_ENUMS.SMALL_STATS_FILTER_KEPLER_DATA, {\n        datasets: dataTemplate,\n        options: {\n          centerMap: true,\n        },\n      });\n      redrawAll();\n      return () => {\n        dimension.filterAll();\n      };\n    }\n    return () => {};\n  }, [filters]);\n\n  return (\n    <>\n      <Row>\n        {alertTypes\n          .filter(a => a.key !== 'others')\n          .sort((a, b) => b.value - a.value)\n          .map(({ key: alert, value }, idx) => {\n            const stats = smallStats[idx];\n            stats.label = statsData[alert].label;\n            stats.value = statsData[alert].value;\n            stats.datasets[0].data = statsData[alert].datasets;\n            stats.percentage = statsData[alert].percentage;\n            stats.increase = statsData[alert].increase;\n            return (\n              <Col className=\"col-lg mb-4\" key={alert} {...stats.attrs}>\n                <SmallStat\n                  id={`small-stats-${idx}`}\n                  variation=\"1\"\n                  chartData={stats.datasets}\n                  chartLabels={stats.chartLabels}\n                  label={stats.label}\n                  value={stats.value}\n                  percentage={stats.percentage}\n                  increase={stats.increase}\n                />\n                <Button\n                  key={alert}\n                  theme=\"info\"\n                  // size=\"lg\"\n                  block\n                  className=\"mt-2\"\n                  active={!!filters.includes(alert)}\n                  onClick={() => {\n                    if (filters.includes(alert)) {\n                      setFilters(filters.filter(a => a !== alert));\n                    } else {\n                      setFilters([...filters, alert]);\n                    }\n                  }}\n                >\n                  <span style={{ 'font-size': 'larger' }}>Filter</span>\n                </Button>\n              </Col>\n            );\n          })}\n      </Row>\n    </>\n  );\n};\n\nSmallStats.propTypes = {\n  smallStats: PropTypes.arrayOf(\n    PropTypes.shape({\n      label: PropTypes.string,\n      value: PropTypes.string,\n      percentage: PropTypes.string,\n      increase: PropTypes.bool,\n      decrease: PropTypes.bool,\n      chartLabels: PropTypes.arrayOf(PropTypes.string),\n      attrs: PropTypes.objectOf(PropTypes.string),\n      datasets: PropTypes.arrayOf(\n        PropTypes.shape({\n          label: PropTypes.string,\n          fill: PropTypes.string,\n          borderWidth: PropTypes.number,\n          backgroundColor: PropTypes.string,\n          borderColor: PropTypes.string,\n          data: PropTypes.arrayOf(PropTypes.number),\n        })\n      ),\n    })\n  ),\n  reduxHandler: PropTypes.func.isRequired,\n};\n\nSmallStats.defaultProps = {\n  smallStats: [\n    {\n      label: 'Posts',\n      value: '2,390',\n      percentage: '4.7%',\n      increase: true,\n      chartLabels: [null, null, null, null, null, null, null],\n      attrs: { md: '6', sm: '6' },\n      datasets: [\n        {\n          label: 'Today',\n          fill: 'start',\n          borderWidth: 1.5,\n          backgroundColor: 'rgba(0, 184, 216, 0.1)',\n          borderColor: 'rgb(0, 184, 216)',\n          data: [1, 2, 1, 3, 5, 4, 7],\n        },\n      ],\n    },\n    {\n      label: 'Pages',\n      value: '182',\n      percentage: '12.4',\n      increase: true,\n      chartLabels: [null, null, null, null, null, null, null],\n      attrs: { md: '6', sm: '6' },\n      datasets: [\n        {\n          label: 'Today',\n          fill: 'start',\n          borderWidth: 1.5,\n          backgroundColor: 'rgba(23,198,113,0.1)',\n          borderColor: 'rgb(23,198,113)',\n          data: [1, 2, 3, 3, 3, 4, 4],\n        },\n      ],\n    },\n    {\n      label: 'Comments',\n      value: '8,147',\n      percentage: '3.8%',\n      increase: false,\n      decrease: true,\n      chartLabels: [null, null, null, null, null, null, null],\n      attrs: { md: '4', sm: '6' },\n      datasets: [\n        {\n          label: 'Today',\n          fill: 'start',\n          borderWidth: 1.5,\n          backgroundColor: 'rgba(255,180,0,0.1)',\n          borderColor: 'rgb(255,180,0)',\n          data: [2, 3, 3, 3, 4, 3, 3],\n        },\n      ],\n    },\n    {\n      label: 'New Customers',\n      value: '29',\n      percentage: '2.71%',\n      increase: false,\n      decrease: true,\n      chartLabels: [null, null, null, null, null, null, null],\n      attrs: { md: '4', sm: '6' },\n      datasets: [\n        {\n          label: 'Today',\n          fill: 'start',\n          borderWidth: 1.5,\n          backgroundColor: 'rgba(255,65,105,0.1)',\n          borderColor: 'rgb(255,65,105)',\n          data: [1, 7, 1, 3, 1, 4, 8],\n        },\n      ],\n    },\n    {\n      label: 'Subscribers',\n      value: '17,281',\n      percentage: '2.4%',\n      increase: false,\n      decrease: true,\n      chartLabels: [null, null, null, null, null, null, null],\n      attrs: { md: '4', sm: '6' },\n      datasets: [\n        {\n          label: 'Today',\n          fill: 'start',\n          borderWidth: 1.5,\n          backgroundColor: 'rgb(0,123,255,0.1)',\n          borderColor: 'rgb(0,123,255)',\n          data: [3, 2, 3, 2, 4, 5, 4],\n        },\n      ],\n    },\n  ],\n};\n\nexport default SmallStats;\n","import React from 'react';\nimport * as dc from 'dc';\nimport { Button } from 'shards-react';\n\nexport const ResetButton = ({\n  chart,\n  text,\n  className = '',\n  theme = 'warning',\n  size = '',\n}) => {\n  return (\n    <Button\n      theme={theme}\n      size={size}\n      className={className}\n      onClick={() => {\n        chart.filterAll();\n        dc.redrawAll();\n      }}\n    >\n      {text}\n    </Button>\n  );\n};\n","import React, { useState, useContext, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Row, Col, Card, CardHeader, CardBody, CardTitle } from 'shards-react';\nimport styled from 'styled-components';\n\nimport { DataContext } from '../DataContext';\nimport { ResetButton } from './ResetButton';\nimport dataTemplate from '../../data/kepler-data-template';\nimport REDUX_ENUMS from '../../store/constants';\n\nconst Div = styled.div`\n    width: 100%;\n    height: auto;\n    box-sizing: border-box;\n    padding: 5px;\n    & label: {\n      textTransform: 'capitalize',\n      textDecoration: 'underline',\n    }\n`;\n\nconst ChartTemplate = ({\n  chartFunction,\n  title,\n  reduxHandler,\n  className,\n  titleClassName,\n  resetClassName,\n  resetText,\n}) => {\n  /*\n    We render the dc chart using an effect. We want to pass the chart as a prop\n    after the dc call, but there is nothing by default to trigger a re-render and\n    the prop, by default would be undefined.\n    To solve this, we hold a state key and increment it after the effect ran.\n    By passing the key to the parent div, we get a rerender once the chart is defined.\n    */\n\n  const [chart, updateChart] = useState(null);\n  const { data } = useContext(DataContext);\n  const div = useRef(null);\n\n  useEffect(() => {\n    // chartfunction takes the ref and does something with it\n    const newChart = chartFunction({ div: div.current, data });\n\n    newChart.on('filtered', () => {\n      dataTemplate.data.rows = data.allFiltered().map(d => d.kepler);\n      return reduxHandler(REDUX_ENUMS.DC_CHART_FILTER_KEPLER_DATA, {\n        datasets: dataTemplate,\n        options: {\n          centerMap: true,\n        },\n      });\n    });\n    newChart.render();\n    updateChart(newChart);\n  }, []);\n\n  return (\n    <Card>\n      <CardHeader className=\"border-bottom\">\n        <Row className=\"align-items-center\">\n          <Col xs={8}>\n            <CardTitle className={titleClassName}>{title}</CardTitle>\n          </Col>\n          <Col>\n            <ResetButton\n              chart={chart}\n              text={resetText}\n              className={resetClassName}\n            />\n          </Col>\n        </Row>\n      </CardHeader>\n      <CardBody className={className}>\n        <Div ref={div} />\n      </CardBody>\n    </Card>\n  );\n};\n\nChartTemplate.propTypes = {\n  chartFunction: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired,\n  reduxHandler: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  titleClassName: PropTypes.string,\n  resetClassName: PropTypes.string,\n  resetText: PropTypes.string,\n};\n\nChartTemplate.defaultProps = {\n  className: 'p-1',\n  titleClassName: '',\n  resetClassName: 'd-flex ml-auto',\n  resetText: 'Reset',\n};\n\nexport default ChartTemplate;\n","import React from 'react';\nimport * as dc from 'dc';\nimport PropTypes from 'prop-types';\n\nimport ChartTemplate from './ChartTemplate';\n\nconst dayOfWeekFunc = ({ div, data }) => {\n  const dayOfWeekChart = dc.rowChart(div);\n\n  const dimension = data.dimension(d => {\n    const startDay = d.startTime.getDay();\n    const endDay = d.endTime.getDay();\n    const name = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    if (startDay === endDay) {\n      return [`${startDay}.${name[startDay]}`];\n    }\n    return [`${startDay}.${name[startDay]}`, `${endDay}.${name[endDay]}`];\n  }, true);\n  const group = dimension.group();\n\n  dayOfWeekChart\n    .dimension(dimension)\n    .group(group)\n    .ordering(dc.pluck('key'))\n    .elasticX(true)\n    .label(({ key }) => key.slice(2, key.length + 1))\n    .xAxis()\n    .ticks(5);\n\n  return dayOfWeekChart;\n};\n\nconst DayOfWeekChart = ({ reduxHandler }) => (\n  <ChartTemplate\n    chartFunction={dayOfWeekFunc}\n    title=\"Weekday\"\n    reduxHandler={reduxHandler}\n  />\n);\n\nDayOfWeekChart.propTypes = {\n  reduxHandler: PropTypes.func.isRequired,\n};\n\nexport default DayOfWeekChart;\n","import React from 'react';\nimport * as dc from 'dc';\nimport { scaleOrdinal } from 'd3';\nimport PropTypes from 'prop-types';\n\nimport ChartTemplate from './ChartTemplate';\n\nconst hourOfDayFunc = ({ div, data }) => {\n  const hourOfDayChart = dc.barChart(div);\n  const dimension = data.dimension(\n    d => d.hours.map(date => date.getHours()),\n    true\n  );\n  const group = dimension.group();\n\n  hourOfDayChart\n    .dimension(dimension)\n    .group(group)\n    .gap(2)\n    .x(scaleOrdinal())\n    .xUnits(dc.units.ordinal)\n    .height(250)\n    .renderHorizontalGridLines(true)\n    .elasticY(true)\n    .yAxisLabel('Total Alerts')\n    .xAxisLabel('Hour');\n\n  const ticks = group.all().map((g, i) => (!(i % 2) ? g.key : null));\n\n  hourOfDayChart\n    .xAxis()\n    .tickValues(ticks)\n    .tickSizeOuter(0);\n\n  hourOfDayChart.yAxis().ticks(5);\n\n  return hourOfDayChart;\n};\n\nconst HourOfDayChart = ({ reduxHandler }) => (\n  <ChartTemplate\n    chartFunction={hourOfDayFunc}\n    chartName=\"HourOfDay\"\n    title=\"Active Alerts by Hour\"\n    reduxHandler={reduxHandler}\n  />\n);\n\nHourOfDayChart.propTypes = {\n  reduxHandler: PropTypes.func.isRequired,\n};\n\nexport default HourOfDayChart;\n","import React, { useState, useContext, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Row, Col, Card, CardHeader, CardBody, CardTitle } from 'shards-react';\nimport styled from 'styled-components';\n\nimport { DataContext } from '../DataContext';\nimport { ResetButton } from './ResetButton';\nimport dataTemplate from '../../data/kepler-data-template';\nimport REDUX_ENUMS from '../../store/constants';\n\nconst Div = styled.div`\n    width: 100%;\n    height: auto;\n    box-sizing: border-box;\n    padding: 5px;\n    & label: {\n      textTransform: 'capitalize',\n      textDecoration: 'underline',\n    }\n`;\n\nconst ChartTemplate = ({\n  chartFunction,\n  title,\n  reduxHandler,\n  className,\n  titleClassName,\n  resetClassName,\n  resetText,\n}) => {\n  /*\n    We render the dc chart using an effect. We want to pass the chart as a prop\n    after the dc call, but there is nothing by default to trigger a re-render and\n    the prop, by default would be undefined.\n    To solve this, we hold a state key and increment it after the effect ran.\n    By passing the key to the parent div, we get a rerender once the chart is defined.\n    */\n\n  const [chart, updateChart] = useState(null);\n  const { data } = useContext(DataContext);\n  const div1 = useRef(null);\n  const div2 = useRef(null);\n\n  useEffect(() => {\n    // chartfunction takes the ref and does something with it\n    const [newChart, secondChart] = chartFunction({\n      div1: div1.current,\n      div2: div2.current,\n      data,\n    });\n\n    newChart.on('filtered', () => {\n      dataTemplate.data.rows = data.allFiltered().map(d => d.kepler);\n      return reduxHandler(REDUX_ENUMS.DC_CHART_FILTER_KEPLER_DATA, {\n        datasets: dataTemplate,\n        options: {\n          centerMap: true,\n        },\n      });\n    });\n\n    newChart.render();\n    secondChart.render();\n\n    updateChart(newChart);\n  }, []);\n\n  return (\n    <Card>\n      <CardHeader className=\"border-bottom\">\n        <Row className=\"align-items-center\">\n          <Col xs={8}>\n            <CardTitle className={titleClassName}>{title}</CardTitle>\n          </Col>\n          <Col>\n            <ResetButton\n              chart={chart}\n              text={resetText}\n              className={resetClassName}\n            />\n          </Col>\n        </Row>\n      </CardHeader>\n      <CardBody className={className}>\n        <Div ref={div2} />\n        <Div ref={div1} />\n      </CardBody>\n    </Card>\n  );\n};\n\nChartTemplate.propTypes = {\n  chartFunction: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired,\n  reduxHandler: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  titleClassName: PropTypes.string,\n  resetClassName: PropTypes.string,\n  resetText: PropTypes.string,\n};\n\nChartTemplate.defaultProps = {\n  className: 'p-1',\n  titleClassName: '',\n  resetClassName: 'd-flex ml-auto',\n  resetText: 'Reset',\n};\n\nexport default ChartTemplate;\n","import React from 'react';\nimport * as dc from 'dc';\nimport PropTypes from 'prop-types';\nimport { scaleTime, utcHour, utcHours } from 'd3';\n\nimport LinkedChartsTemplate from './LinkedChartsTemplate';\nimport { getSundayBefore, getLastSunday } from '../../utils';\n\nconst lineAndBarChartsFunc = ({ div1, div2, data }) => {\n  const dimension = data.dimension(d => d.hours, true);\n  const alertsGroup = dimension.group();\n  const interactionsGroup = dimension.group().reduceSum(d => d.interactions);\n\n  const volumeChart = dc.barChart(div1);\n\n  let lastSunday = getLastSunday();\n  const sundayBefore = getSundayBefore(lastSunday);\n\n  lastSunday = new Date(lastSunday.setUTCHours(0));\n\n  volumeChart\n    .height(80)\n    .margins({ top: 0, right: 50, bottom: 20, left: 40 })\n    .dimension(dimension)\n    .group(alertsGroup, 'Total Alerts')\n    .centerBar(true)\n    .gap(1)\n    .x(scaleTime().domain([sundayBefore, lastSunday]))\n    .round(utcHour.round)\n    .alwaysUseRounding(true)\n    .xUnits(utcHour);\n\n  const lineChart = dc.lineChart(div2);\n\n  lineChart\n    .dimension(dimension)\n    .mouseZoomable(false)\n    .rangeChart(volumeChart)\n    .transitionDuration(1000)\n    .x(scaleTime().domain([sundayBefore, lastSunday]))\n    .round(utcHour.round)\n    .xUnits(utcHours)\n    .elasticY(true)\n    .renderHorizontalGridLines(true)\n    .legend(\n      dc\n        .legend()\n        .x(800)\n        .y(10)\n        .itemHeight(13)\n        .gap(5)\n    )\n    .brushOn(false)\n    .group(interactionsGroup, 'Hourly Interactions');\n  /* .title(d => {\n      let value = d.value ? d.value.avg : d.value;\n      if (isNaN(value)) {\n        value = 0;\n      }\n      return `${dateFormat(d.key)}\\n${numberFormat(value)}`;\n    }); */\n  return [volumeChart, lineChart];\n};\n\nconst InteractionLineChart = ({ reduxHandler }) => (\n  <LinkedChartsTemplate\n    chartFunction={lineAndBarChartsFunc}\n    title=\"Hourly Alert Interactions\"\n    reduxHandler={reduxHandler}\n  />\n);\n\nInteractionLineChart.propTypes = {\n  reduxHandler: PropTypes.func.isRequired,\n};\n\nexport default InteractionLineChart;\n","import React from 'react';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport KeplerGl from 'kepler.gl';\nimport PropTypes from 'prop-types';\nimport { Card, CardBody } from 'shards-react';\n\nconst MAPBOX_TOKEN = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN; // eslint-disable-line\n\nconst KeplerMap = ({ id }) => {\n  return (\n    <Card className=\"h-100\">\n      <CardBody style={{ minHeight: '660px' }}>\n        <AutoSizer>\n          {({ height, width }) => (\n            <KeplerGl\n              mapboxApiAccessToken={MAPBOX_TOKEN}\n              id={id}\n              width={width}\n              height={height}\n            />\n          )}\n        </AutoSizer>\n      </CardBody>\n    </Card>\n  );\n};\n\nKeplerMap.propTypes = {\n  id: PropTypes.oneOf([PropTypes.string, PropTypes.number]).isRequired,\n};\n\nexport default KeplerMap;\n","import React, { useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n// import styled from 'styled-components';\n\nimport { DataContext } from '../DataContext';\nimport dataTemplate from '../../data/kepler-data-template';\nimport KeplerMap from '../KeplerMap';\nimport REDUX_ENUMS from '../../store/constants';\n\nfunction KeplerAlerts({ id, reduxHandler }) {\n  const { data } = useContext(DataContext);\n\n  useEffect(() => {\n    dataTemplate.data.rows = data.all().map(d => d.kepler);\n    reduxHandler(REDUX_ENUMS.KEPLER_MOUNT_ADD_DATA_TO_MAP, {\n      datasets: dataTemplate,\n      options: {\n        centerMap: true,\n      },\n    });\n  }, []);\n\n  return <KeplerMap id={id} />;\n}\n\nKeplerAlerts.propTypes = {\n  id: PropTypes.oneOf([PropTypes.string, PropTypes.number]).isRequired,\n  reduxHandler: PropTypes.func.isRequired,\n};\n\nexport default KeplerAlerts;\nexport { REDUX_ENUMS };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Row, Col } from 'shards-react';\n// import styled from 'styled-components';\n\nimport DayOfWeekChart from './DayOfWeekChart';\nimport HourOfDayChart from './HourOfDayChart';\nimport InteractionLineChart from './InteractionLineChart';\nimport KeplerAlerts from './KeplerAlerts';\n\n// const Div = styled.div`\n//   padding: 1rem;\n//   margin-top: 2rem;\n// `;\n\nconst DcCharts = ({ keplerId, reduxHandler }) => {\n  return (\n    <>\n      <Row className=\"mb-3\">\n        <Col sm={12} md={8} className=\"px-2\">\n          <Row style={{ height: '100%' }}>\n            <Col sm={12}>\n              <KeplerAlerts id={keplerId} reduxHandler={reduxHandler} />\n            </Col>\n          </Row>\n        </Col>\n        <Col md={4} sm={12} className=\"px-2\">\n          <Row className=\"mb-3\">\n            <Col sm={12}>\n              <DayOfWeekChart reduxHandler={reduxHandler} />\n            </Col>\n          </Row>\n          <Row>\n            <Col sm={12}>\n              <HourOfDayChart reduxHandler={reduxHandler} />\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n      <Row className=\"mb-3\">\n        <Col sm={12}>\n          <InteractionLineChart reduxHandler={reduxHandler} />\n        </Col>\n      </Row>\n      <Row className=\"mb-3\" />\n      {/* <Row>\n        <Col md={7}>\n          <Row>\n            <Col md={12}>\n              <MoveChart />\n            </Col>\n          </Row>\n          <Row>\n            <Col md={6}>\n              <GainOrLossChart />\n            </Col>\n            <Col md={6}>\n              <FluctuationChart />\n            </Col>\n\n            <Col md={6}>\n              <QuarterChart />\n            </Col>\n            <Col md={6} />\n          </Row>\n        </Col>\n        <Col\n          md={5}\n          style={{ overflowY: 'scroll', maxHeight: '70vh', width: '100%' }}\n        >\n          <DataTable />\n        </Col>\n      </Row> */}\n    </>\n  );\n};\n\nDcCharts.propTypes = {\n  keplerId: PropTypes.string.isRequired,\n  reduxHandler: PropTypes.func.isRequired,\n};\n\nexport default DcCharts;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect, useDispatch } from 'react-redux';\nimport { forwardTo } from 'kepler.gl/actions';\nimport { Container, Row } from 'shards-react';\n\nimport REDUX_ENUMS from '../../store/constants';\nimport {\n  keplerMountAddData,\n  dcChartFilterKeplerData,\n  smallStatsFilterKeplerData,\n} from '../../store/actions';\n\n// import { Container } from './styles';\nimport PageTitle from '../../components/PageTitle';\nimport SmallStats from '../../components/SmallStats';\nimport DcCharts from '../../components/DcCharts';\n\nconst WeeklyReport = ({ city }) => {\n  const keplerId = `${city}-map`;\n  const dispatch = useDispatch();\n  const mapDispatch = forwardTo(keplerId, dispatch);\n\n  function reduxHandler(type, data) {\n    switch (type) {\n      case REDUX_ENUMS.KEPLER_MOUNT_ADD_DATA_TO_MAP:\n        keplerMountAddData({ mapDispatch, dispatch, data });\n        break;\n      case REDUX_ENUMS.DC_CHART_FILTER_KEPLER_DATA:\n        dcChartFilterKeplerData({ mapDispatch, dispatch, data });\n        break;\n      case REDUX_ENUMS.SMALL_STATS_FILTER_KEPLER_DATA:\n        smallStatsFilterKeplerData({ mapDispatch, dispatch, data });\n        break;\n      default:\n        break;\n    }\n  }\n\n  return (\n    <Container fluid className=\"main-content-container px-4\">\n      {/* Page Header */}\n      <Row noGutters className=\"page-header py-2\">\n        <PageTitle\n          title={city}\n          subtitle=\"Weekly Report\"\n          className=\"text-sm-left mb-3\"\n        />\n      </Row>\n\n      {/* Small Stats Blocks */}\n      <SmallStats reduxHandler={reduxHandler} />\n\n      <DcCharts keplerId={keplerId} reduxHandler={reduxHandler} />\n    </Container>\n  );\n};\n\nWeeklyReport.propTypes = {\n  city: PropTypes.string.isRequired,\n};\n\nexport default connect()(WeeklyReport);\n","import { addDataToMap } from 'kepler.gl/actions';\n\nimport REDUX_ENUMS from './constants';\n\nexport function keplerMountAddData({ mapDispatch, dispatch, data }) {\n  dispatch({ type: REDUX_ENUMS.KEPLER_MOUNT_ADD_DATA_TO_MAP });\n  mapDispatch(addDataToMap(data));\n}\n\nexport function dcChartFilterKeplerData({ mapDispatch, dispatch, data }) {\n  dispatch({ type: REDUX_ENUMS.DC_CHART_FILTER_KEPLER_DATA });\n  mapDispatch(addDataToMap(data));\n}\n\nexport function smallStatsFilterKeplerData({ mapDispatch, dispatch, data }) {\n  dispatch({ type: REDUX_ENUMS.SMALL_STATS_FILTER_KEPLER_DATA });\n  mapDispatch(addDataToMap(data));\n}\n","import React from 'react';\nimport { Switch, Redirect, Route } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nimport DefaultLayout from './layouts';\nimport WeeklyReport from './pages/WeeklyReport';\nimport { DataProvider } from './components/DataContext';\nimport { getLastSunday, getSundayBefore} from './utils';\n\nconst baseUrl = 'https://hugo-data.s3.us-east-2.amazonaws.com';\n\nexport default function Routes({ cities }) {\n  var lastSunday = getLastSunday();\n\n  if (new Date() < lastSunday){\n    lastSunday = getSundayBefore(lastSunday);\n  }\n\n  const prefix = `${baseUrl}/${lastSunday.toJSON().slice(0,10).replace(/-/g,'/')}/`;\n\n  return (\n    <Switch>\n      <Redirect exact from=\"/\" to=\"/miraflores\" />\n      {cities.map(city => (\n        <Route key={city.id} path={city.path}>\n          <DataProvider url={prefix + city.fileName} aggFile={city.aggFile}>\n            <DefaultLayout>\n              <WeeklyReport city={city.name} />\n            </DefaultLayout>\n          </DataProvider>\n        </Route>\n      ))}\n    </Switch>\n  );\n}\n\nRoutes.propTypes = {\n  cities: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number,\n      path: PropTypes.string,\n      name: PropTypes.string,\n      fileName: PropTypes.string,\n      aggFile: PropTypes.string,\n    })\n  ),\n};\n\nRoutes.defaultProps = {\n  cities: [\n    {\n      id: 1,\n      path: '/miraflores',\n      name: 'Miraflores',\n      fileName: 'Miraflores/ALERTS.csv',\n      aggFile: 'MirafloresAgg.json',\n    },\n    {\n      id: 2,\n      path: '/montevideo',\n      name: 'Montevideo',\n      fileName: 'Montevideo/ALERTS.csv',\n      aggFile: 'MontevideoAgg.json',\n    },\n    { id: 3, path: '/quito', name: 'Quito', fileName: 'Quito/ALERTS.csv', aggFile: 'QuitoAgg.json', },\n    {\n      id: 4,\n      path: '/sao-paulo',\n      name: 'São Paulo',\n      fileName: 'SaoPaulo/ALERTS.csv',\n      aggFile: 'SaoPauloAgg.json',\n    },\n    {\n      id: 5,\n      path: '/xalapa',\n      name: 'Xalapa',\n      fileName: 'Xalapa/ALERTS.csv',\n      aggFile: 'XalapaAgg.json',\n    },\n  ],\n};\n","import { createGlobalStyle } from 'styled-components';\n\nexport default createGlobalStyle`\n  * {\n    margin: 0;\n    padding: 0;\n    outline: 0;\n    box-sizing: border-box;\n  }\n\n  html, body, #root {\n    min-height: 100%;\n  }\n\n  body {\n    -webkit-font-smoothing: antialiased !important;\n  }\n\n  body, input, button {\n    color: #222;\n    font-size: 14px;\n    font-family: Arial, Helvetica, sans-serif;\n  }\n\n  button {\n    cursor: pointer;\n  }\n`;\n","import React from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\n\nimport './config/ReactotronConfig';\n\nimport Routes from './routes';\nimport GlobalStyle from './styles/global';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './styles/shards-dashboards.1.1.0.min.css';\n\nimport store from './store';\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <BrowserRouter basename=\"/cities-reports\">\n        <Routes />\n        <GlobalStyle />\n      </BrowserRouter>\n    </Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}